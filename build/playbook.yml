---
  - hosts: development
    sudo: yes
    vars:
      - nginx_vhosts:
          - listen: "80 default_server"
            server_name: "010php.vm"
            root: "/vagrant/public"
            index: "app.php app_dev.php"
            extra_parameters: |
              location ~ \.php$ {
                fastcgi_split_path_info ^(.+\.php)(/.+)$;
                fastcgi_pass unix:/var/run/php5-fpm.sock;
                fastcgi_index index.php;
                fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
                include fastcgi_params;
              }
      - mysql_root_password: root
      - mysql_databases:
        - name: 010php
          encoding: utf8
          collation: utf8_general_ci
      - mysql_users:
        - name: 010php
          host: "%"
          password: "YmYxNmNlMjQ3NzBlZTQ4YjFlYWIyNDE3"
          priv: "010php.*:ALL"
    roles:
      - { role: ansible-role-servertools }
      - { role: geerlingguy.nginx }
      - { role: geerlingguy.php }
      - { role: geerlingguy.mysql }
      - { role: geerlingguy.composer }